{% load staticfiles %}
{#{% load userlist_tag %}#}
{#{% load record_tags %}#}
{#{% load task_tags %}#}
<!DOCTYPE html>
<html lang="en">
<!----------------------------------------------------- 头部开始 -------------------------------------------------------->
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

    <!----------------------------------------------------- 标题 --------------------------------------------------------->
    <title>
        {% block title %}主面板{% endblock title %} | Vincent-管理系统
    </title>

    <!----------------------------------------------------- 静态css文件 -------------------------------------------------->
    <link rel="stylesheet" href="{% static 'users/css/bootstrap.css' %}" type="text/css">
    <link rel="stylesheet" href="{% static 'users/css/animate.css' %}" type="text/css">
    <link rel="stylesheet" href="{% static 'users/css/font-awesome.min.css' %}" type="text/css">
    <link rel="stylesheet" href="{% static 'users/css/simple-line-icons.css' %}" type="text/css">
    <link rel="stylesheet" href="{% static 'users/css/font.css' %}" type="text/css">
    <link rel="stylesheet" href="{% static 'users/css/app.css' %}" type="text/css">

    <!----------------------------------------------------- 其他静态css文件 ----------------------------------------------->
    {% block other_css %}
    {% endblock other_css %}
</head>
<body style="overflow:hidden; box-sizing:border-box;">
<div class="app app-header-fixed" id="app">
    <div id="wrapper" class="container1">

        <!----------------------------------------------------- logo栏开始 --------------------------------------------------->
        <div class="app-header navbar">

            <!-- logo -->
            <div class="navbar-header bg-white-only">
                <a href="{% url 'users:index' %}" class="navbar-brand text-lt">
                    <i class="glyphicon glyphicon-send"></i>
                    <span class="hidden-folded m-l-xs">Inhand Docs</span>
                </a>
            </div>

            <!----------------------------------------------------- logo栏左边 ------------------------------------------------->
            <div class="collapse pos-rlt navbar-collapse box-shadow bg-white-only">

                <div class="nav navbar-nav hidden-xs">
                    <!-- 收起侧边栏按钮 -->
                    <a href="" class="btn no-shadow navbar-btn" data-toggle="class:app-aside-folded" data-target=".app">
                        <i class="fa fa-dedent fa-fw text"></i>
                        <i class="fa fa-indent fa-fw text-active"></i>
                    </a>

                </div>

                <ul class="nav navbar-nav hidden-sm">

                    <ul class="nav navbar-nav hidden-sm">

                        <!-- 功能菜单 -->
                        <li class="dropdown pos-stc">
                            <a href="" data-toggle="dropdown" class="dropdown-toggle">
                                <span>文档管理</span>
                                <span class="caret"></span>
                            </a>
                            <div class="dropdown-menu wrapper w-full bg-white">

                                <div class="row" style="font-size: 12px;">

                                    <!-- 功能项目1 -->
                                    <div class="col-sm-3">
                                        <div class="m-l-xs m-t-xs m-b-xs font-bold">路由器</div>
                                        <div class="row">

                                            <!-- 第一列 -->
                                            <div class="col-xs-6">
                                                <ul class="list-unstyled l-h-2x">
                                                    <li>
                                                        <a href="#">
                                                            <i class="fa fa-fw fa-angle-right text-muted m-r-xs"></i>DTU
                                                        </a>
                                                    </li>
                                                    <li>
                                                        <a href="#">
                                                            <i class="fa fa-fw fa-angle-right text-muted m-r-xs"></i>Inbox
                                                        </a>
                                                    </li>
                                                </ul>
                                            </div>

                                            <!-- 第二列 -->
                                            <div class="col-xs-6">
                                                <ul class="list-unstyled l-h-2x">
                                                    <li>
                                                        <a href="#">
                                                            <i class="fa fa-fw fa-angle-right text-muted m-r-xs"></i>其他
                                                        </a>
                                                    </li>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>

                                </div>
                            </div>
                        </li>
                    </ul>
                </ul>


                <!----------------------------------------------------- logo栏右边 ----------------------------------------------->
                <ul class="nav navbar-nav navbar-right">

                    <li class="dropdown">
                        <a href="" data-toggle="dropdown" class="dropdown-toggle">
                            <i class="icon-bell fa-fw"></i>
                            <span class="visible-xs-inline">提醒图标</span>
                            <span class="badge badge-sm up bg-danger pull-right-xs">3</span>
                        </a>
                        <!-- 提醒图标的下拉菜单 -->
                        <div class="dropdown-menu w-xl animated fadeInUp">
                            <div class="panel bg-white">
                                <div class="panel-heading b-light bg-light">
                                    <strong>你有 <span></span>3 条信息 <a style="color: orangered;">（只显示最新 3
                                        条）</a></strong>
                                </div>
                                <div class="list-group">

                                    {% for each in 'abc' %}
                                        <a href="#" class="media list-group-item">
                  <span class="pull-left thumb-sm">
                    <img src="{{ MEDIA_URL }}{{ each.send_user.avatar }}" class="img-circle">
                  </span>
                                            <span class="media-body block m-b-none">
                    <p style="font-size: 12px;">{{ each.msg_content|safe }}</p><br>
                    <small class="text-muted">{{ each.add_time }}</small>
                  </span>
                                        </a>
                                    {% empty %}
                                        <p style="padding-top: 20px;padding-left: 20px; color: darkgray;">暂无消息！</p>
                                    {% endfor %}
                                </div>

                                <div class="panel-footer text-sm">
                                    <a href="#" class="pull-right">
                                        <i class="fa fa-cog"></i>
                                    </a>
                                    <a href="#">查看所有</a>
                                </div>
                            </div>
                        </div>
                    </li>


                    <!-- 用户头像 -->
                    <li class="dropdown">
                        <a href="#" data-toggle="dropdown" class="dropdown-toggle clear">
            <span class="thumb-sm avatar pull-right m-t-n-sm m-b-n-sm m-l-sm">
              <img src="{{ MEDIA_URL }}{{ request.user.avatar }}">
              <i class="on md b-white bottom"></i>
            </span>
                            <span class="hidden-sm hidden-md">{{ request.user.username }}</span> <b
                                class="caret"></b>
                        </a>

                        <!-- 头像下拉菜单 -->
                        <ul class="dropdown-menu animated fadeInRight w" style="font-size: 12px;">
                            <li class="wrapper b-b m-b-sm bg-light m-t-n-xs">
                                <progressbar value="60" class="progress-xs m-b-none bg-white"></progressbar>
                            </li>
                            <li>
                                <a href="{% url 'users:user_info' %}">
                                    <span>用户资料</span>
                                </a>
                            </li>
                            <li class="divider"></li>
                            <li>
                                <a href="{% url 'users:logout' %}">注销</a>
                            </li>
                        </ul>

                    </li>

                </ul>
            </div>
        </div>
        <!----------------------------------------------------- logo栏结束 ---------------------------------------------------->


        <!----------------------------------------------------- 侧边菜单栏开始 ------------------------------------------------->
        <div class="app-aside hidden-xs bg-black">
            <div class="aside-wrap">
                <div class="navi-wrap">

                    <!-- 点击显示的用户大头像 -->
                    <div class="clearfix hidden-xs text-center hide" id="aside-user">
                        <div class="dropdown wrapper">
                            <a href="">
                <span class="thumb-lg w-auto-folded avatar m-t-sm">
                  <!-- 大头像 -->
                  <img src="{{ MEDIA_URL }}{{ request.user.avatar }}" class="img-full">
                </span>
                            </a>
                            <a href="" data-toggle="dropdown" class="dropdown-toggle hidden-folded">
                <span class="clear">
                  <span class="block m-t-sm">
                    <strong class="font-bold text-lt">{{ request.user.username }}</strong>
                    <b class="caret"></b>
                  </span>
                  <span class="text-muted text-xs block">{{ request.user.nick_name }}</span>
                </span>
                            </a>

                            <!-- 头像下拉菜单 -->
                            <ul class="dropdown-menu animated fadeInRight w hidden-folded">
                                <li class="wrapper b-b m-b-sm bg-info m-t-n-xs">
                                    <progressbar value="60" type="white"
                                                 class="progress-xs m-b-none dker"></progressbar>
                                </li>
                                <li>
                                    <a href="{% url 'users:user_info' %}" style="font-size: 12px;">用户资料</a>
                                </li>

                                <li class="divider"></li>
                                <li>
                                    <a href="{% url 'users:logout' %}">
                                        <span style="font-size: 12px;">注销</span>
                                    </a>
                                </li>
                            </ul>

                        </div>
                    </div>

                    <!-- 侧边功能栏 -->
                    <nav class="navi">
                        <ul class="nav">
                            <li>
                                &nbsp;
                            </li>

                            <li {% ifequal web_func 'index' %}class="active"{% endifequal %}>
                                <a href="{% url 'users:index' %}">
                                    <i class="glyphicon glyphicon-home"></i>
                                    <span style="font-size: 14px;">主页概览</span>
                                </a>
                            </li>

                            <!-- 项目文档管理 -->
                            <li {% ifequal web_title 'project_mana' %}class="active"{% endifequal %}>
                                <a href="">
                                    <i class="glyphicon glyphicon-list-alt"></i>
                                    <span style="font-size: 13px; ">文档管理</span>
                                </a>
                                <ul class="nav nav-sub dk" style="font-size: 12px;">
                                    <li {% ifequal web_func 'project_doc' %}class="active"{% endifequal %}>
                                        <a href="{% url 'product_docs:install_doc_list' %}">
                                            <span>产品文档</span>
                                        </a>
                                    </li>
                                </ul>
                            </li>

                            <!-- 用户管理 -->
                            <li {% ifequal web_title 'user_manage' %}class="active"{% endifequal %}>
                                <a href="">
                                    <i class="icon-user"></i>
                                    <span style="font-size: 13px; ">用户管理</span>
                                </a>
                                <ul class="nav nav-sub dk" style="font-size: 12px;">

                                    <!-- 用户资料 -->
                                    <li {% ifequal web_func 'userinfo' %}class="active"{% endifequal %}>
                                        <a href="{% url 'users:user_info' %}">
                                            <span style="font-size: 13px;">用户资料</span>
                                        </a>
                                    </li>

                                    <!-- 用户列表 -->
                                    {#                                    <li {% ifequal web_func 'user_list' %}class="active"{% endifequal %}>#}
                                    {#                                        <a href="{% url 'users:user_list' %}">#}
                                    {#                      <i class="icon-users"></i>#}
                                    {#                                            <span style="font-size: 13px;">用户列表</span>#}
                                    {#                                        </a>#}
                                    {#                                    </li>#}

                                    <!-- 用户登录记录 -->
                                    <li {% ifequal web_func 'login_record' %}class="active"{% endifequal %}>
                                        <a href="{% url 'users:login_record' %}">
                                            <span style="font-size: 13px;">登录记录</span>
                                        </a>
                                    </li>
                                </ul>
                            </li>

                        </ul>
                    </nav>

                </div>
            </div>
        </div>
        <!----------------------------------------------------- 侧边菜单栏结束 ------------------------------------------------->


        <!----------------------------------------------------- 内容主体结束 -------------------------------------------------->
        {% block web_content %}
            <!-- 内容主体 -->
            <div class="app-content">
                <a href class="off-screen-toggle hide" data-toggle="class:off-screen" data-target=".app-aside"></a>
                <div class="app-content-body fade-in-up">
                    <div class="hbox hbox-auto-xs hbox-auto-sm">

                        <!----------------------------------------------------- 中间栏 ------------------------------------------------>
                        {% block center_content %}
                        {% endblock center_content %}

                    </div>
                </div>
            </div>
        {% endblock web_content %}
        <!----------------------------------------------------- 内容主体结束 -------------------------------------------------->


        <!----------------------------------------------------- 页脚 --------------------------------------------------------->
        <div class="app-footer wrapper b-t bg-light">
            <span class="pull-right">2018-11-11 至此</span>
            <a href="http://www.vincentisme.com" target="_blank">© 2018-11-07 Copyright | More info VINCENT</a>
        </div>
    </div>
</div>

<!----------------------------------------------------- js 静态文件 ----------------------------------------------------->
<script src="{% static 'users/js/jquery.min.js' %}"></script>
<script src="{% static 'users/js/bootstrap.js' %}"></script>

<!----------------------------------------------------- 侧边栏js ----------------------------------------------------->
<script type="text/javascript">
    +function ($) {
        $(function () {
            // class
            $(document).on('click', '[data-toggle^="class"]', function (e) {
                e && e.preventDefault();
                console.log('abc');
                var $this = $(e.target), $class, $target, $tmp, $classes, $targets;
                !$this.data('toggle') && ($this = $this.closest('[data-toggle^="class"]'));
                $class = $this.data()['toggle'];
                $target = $this.data('target') || $this.attr('href');
                $class && ($tmp = $class.split(':')[1]) && ($classes = $tmp.split(','));
                $target && ($targets = $target.split(','));
                $classes && $classes.length && $.each($targets, function (index, value) {
                    if ($classes[index].indexOf('*') !== -1) {
                        var patt = new RegExp('\\s' +
                            $classes[index].replace(/\*/g, '[A-Za-z0-9-_]+').split(' ').join('\\s|\\s') +
                            '\\s', 'g');
                        $($this).each(function (i, it) {
                            var cn = ' ' + it.className + ' ';
                            while (patt.test(cn)) {
                                cn = cn.replace(patt, ' ');
                            }
                            it.className = $.trim(cn);
                        });
                    }
                    ($targets[index] != '#') && $($targets[index]).toggleClass($classes[index]) || $this.toggleClass($classes[index]);
                });
                $this.toggleClass('active');
            });

            // collapse nav
            $(document).on('click', 'nav a', function (e) {
                var $this = $(e.target), $active;
                $this.is('a') || ($this = $this.closest('a'));

                $active = $this.parent().siblings(".active");
                $active && $active.toggleClass('active').find('> ul:visible').slideUp(200);

                ($this.parent().hasClass('active') && $this.next().slideUp(200)) || $this.next().slideDown(200);
                $this.parent().toggleClass('active');

                $this.next().is('ul') && e.preventDefault();

                setTimeout(function () {
                    $(document).trigger('updateNav');
                }, 300);
            });
        });
    }(jQuery);
</script>

<!----------------------------------------------------- 其他静态js文件 ----------------------------------------------------->
{% block other_js %}
{% endblock other_js %}

</body>
</html>